setwd("C:\\wamp64\\www\\EpiCandIn\\R_plots")
library(plotly)
library(ggplot2)
# create sample data frame
sample_data <- read.csv("drg_data1.csv")
# create donut chart using plot_ly() function
plot_ly(sample_data) %>%
add_pie(labels = ~`group`, values = 1,
type = 'pie', sort = F, hole=0.7,
marker = list(line = list(width = 2))) %>%
add_pie(sample_data, labels = ~`drug`, values = ~`count`,
domain = list(
x = c(0.15, 0.85),
y = c(0.15, 0.85)),
sort = F, hole=0.7)
setwd("C:\\wamp64\\www\\EpiCandIn\\R_plots")
library(plotly)
library(ggplot2)
# create sample data frame
sample_data <- read.csv("drg_data1.csv")
# create donut chart using plot_ly() function
plot_ly(sample_data) %>%
add_pie(labels = ~`group`, values = 1,
type = 'pie', sort = F, hole=0.7, fill=group,
marker = list(line = list(width = 2))) %>%
add_pie(sample_data, labels = ~`drug`, values = ~`count`,
domain = list(
x = c(0.15, 0.85),
y = c(0.15, 0.85)),
sort = F, hole=0.7)
setwd("C:\\wamp64\\www\\EpiCandIn\\R_plots")
library(plotly)
library(ggplot2)
# create sample data frame
sample_data <- read.csv("drg_data1.csv")
# create donut chart using plot_ly() function
plot_ly(sample_data) %>%
add_pie(labels = ~`group`, values = 1,
type = 'pie', sort = F, hole=0.7, fill= ~`group`,
marker = list(line = list(width = 2))) %>%
add_pie(sample_data, labels = ~`drug`, values = ~`count`,
domain = list(
x = c(0.15, 0.85),
y = c(0.15, 0.85)),
sort = F, hole=0.7)
setwd("C:\\wamp64\\www\\EpiCandIn\\R_plots")
library(plotly)
library(ggplot2)
# create sample data frame
sample_data <- read.csv("drg_data1.csv")
# create donut chart using plot_ly() function
plot_ly(sample_data) %>%
add_pie(labels = ~`group`, values = 1,
type = 'pie', sort = F, hole=0.7, colors= ~`group`,
marker = list(line = list(width = 2))) %>%
add_pie(sample_data, labels = ~`drug`, values = ~`count`,
domain = list(
x = c(0.15, 0.85),
y = c(0.15, 0.85)),
sort = F, hole=0.7)
library(ggplot2)
library(webr)
install.packages("webr")
library(ggplot2)
library(webr)
library(dplyr)
#install.packages("webr")
sample_data <- read.csv("drg_data1.csv")
PieDonut(sample_data, aes(group, drug, count=count))
library(ggplot2)
library(webr)
library(dplyr)
#install.packages("webr")
sample_data <- read.csv("drg_data1.csv")
PieDonut(sample_data, aes(drug, group, count=count))
library(ggplot2)
library(webr)
library(dplyr)
#install.packages("webr")
sample_data <- read.csv("drg_data1.csv")
PieDonut(sample_data, aes(group, drug, count=count))
ggplot(sample_data, aes(x = group, y = count, fill = group))+
geom_bar(stat = "identity")+
coord_polar(theta="y")
hsize <- 3.5
df <- sample_data %>%
mutate(x = hsize)
ggplot(df, aes(x = hsize, y = count, fill = group)) +
geom_col() +
geom_text(aes(label = group),
position = position_stack(vjust = 0.5)) +
coord_polar(theta = "y") +
xlim(c(0.2, hsize + 0.5))
#----3----
lvl0 <- tibble(name = "Parent", value = 0, level = 0, fill = NA)
lvl1 <- sample_data %>%
group_by(group) %>%
summarise(value = sum(count)) %>%
ungroup() %>%
mutate(level = 1) %>%
mutate(fill = group)
lvl2 <- sample_data %>%
select(name = drug, count, fill = drug) %>%
mutate(level = 2)
bind_rows(lvl0, lvl1, lvl2) %>%
mutate(name = as.factor(group) %>% fct_reorder2(fill, count)) %>%
arrange(fill, name) %>%
mutate(level = as.factor(level)) %>%
ggplot(aes(x = level, y = count, fill = fill, alpha = level)) +
geom_col(width = 1, color = "gray90", size = 0.25, position = position_stack()) +
geom_text(aes(label = group), size = 2.5, position = position_stack(vjust = 0.5)) +
coord_polar(theta = "y") +
scale_alpha_manual(values = c("0" = 0, "1" = 1, "2" = 0.7), guide = F) +
scale_x_discrete(breaks = NULL) +
scale_y_continuous(breaks = NULL) +
scale_fill_brewer(palette = "Dark2", na.translate = F) +
labs(x = NULL, y = NULL) +
theme_minimal()
lvl0 <- tibble(name = "Parent", value = 0, level = 0, fill = NA)
lvl1 <- sample_data %>%
group_by(group) %>%
summarise(value = sum(count)) %>%
ungroup() %>%
mutate(level = 1) %>%
mutate(fill = group)
lvl2 <- sample_data %>%
select(name = drug, count, fill = drug) %>%
mutate(level = 2)
bind_rows(lvl0, lvl1, lvl2) %>%
mutate(name = as.factor(group) %>% fct_reorder2(fill, count)) %>%
arrange(fill, name) %>%
mutate(level = as.factor(level)) %>%
ggplot(aes(x = level, y = count, fill = fill, alpha = level)) +
geom_col(width = 1, color = "gray90", size = 0.25, position = position_stack()) +
geom_text(aes(label = group), size = 2.5, position = position_stack(vjust = 0.5)) +
coord_polar(theta = "y") +
scale_alpha_manual(values = c("0" = 0, "1" = 1, "2" = 0.7), guide = F) +
scale_x_discrete(breaks = NULL) +
scale_y_continuous(breaks = NULL) +
scale_fill_brewer(palette = "Dark2", na.translate = F) +
labs(x = NULL, y = NULL) +
theme_minimal()
library(tidyverse)
#----3----
install.packages("tidyverse")
library(tidyverse)
lvl0 <- tibble(name = "Parent", value = 0, level = 0, fill = NA)
lvl1 <- sample_data %>%
group_by(group) %>%
summarise(value = sum(count)) %>%
ungroup() %>%
mutate(level = 1) %>%
mutate(fill = group)
lvl2 <- sample_data %>%
select(name = drug, count, fill = drug) %>%
mutate(level = 2)
bind_rows(lvl0, lvl1, lvl2) %>%
mutate(name = as.factor(group) %>% fct_reorder2(fill, count)) %>%
arrange(fill, name) %>%
mutate(level = as.factor(level)) %>%
ggplot(aes(x = level, y = count, fill = fill, alpha = level)) +
geom_col(width = 1, color = "gray90", size = 0.25, position = position_stack()) +
geom_text(aes(label = group), size = 2.5, position = position_stack(vjust = 0.5)) +
coord_polar(theta = "y") +
scale_alpha_manual(values = c("0" = 0, "1" = 1, "2" = 0.7), guide = F) +
scale_x_discrete(breaks = NULL) +
scale_y_continuous(breaks = NULL) +
scale_fill_brewer(palette = "Dark2", na.translate = F) +
labs(x = NULL, y = NULL) +
theme_minimal()
install.packages("tidyverse")
library(tidyverse)
lvl0 <- tibble(name = "Parent", value = 0, level = 0, fill = NA)
lvl1 <- sample_data %>%
group_by(group) %>%
summarise(value = sum(count)) %>%
ungroup() %>%
mutate(level = 1) %>%
mutate(fill = group)
lvl2 <- sample_data %>%
select(group = drug, count, fill = drug) %>%
mutate(level = 2)
bind_rows(lvl0, lvl1, lvl2) %>%
mutate(name = as.factor(group) %>% fct_reorder2(fill, count)) %>%
arrange(fill, group) %>%
mutate(level = as.factor(level)) %>%
ggplot(aes(x = level, y = count, fill = fill, alpha = level)) +
geom_col(width = 1, color = "gray90", size = 0.25, position = position_stack()) +
geom_text(aes(label = group), size = 2.5, position = position_stack(vjust = 0.5)) +
coord_polar(theta = "y") +
scale_alpha_manual(values = c("0" = 0, "1" = 1, "2" = 0.7), guide = F) +
scale_x_discrete(breaks = NULL) +
scale_y_continuous(breaks = NULL) +
scale_fill_brewer(palette = "Dark2", na.translate = F) +
labs(x = NULL, y = NULL) +
theme_minimal()
library(tidyverse)
lvl0 <- tibble(name = "Parent", value = 0, level = 0, fill = NA)
lvl1 <- sample_data %>%
group_by(group) %>%
summarise(value = sum(count)) %>%
ungroup() %>%
mutate(level = 1) %>%
mutate(fill = group)
lvl2 <- sample_data %>%
select(group = drug, count, fill = drug) %>%
mutate(level = 2)
bind_rows(lvl0, lvl1, lvl2) %>%
mutate(name = as.factor(group) %>% fct_reorder2(fill, count)) %>%
arrange(fill, group) %>%
mutate(level = as.factor(level)) %>%
ggplot(aes(x = level, y = count, fill = fill, alpha = level)) +
geom_col(width = 1, color = "gray90", size = 0.25, position = position_stack()) +
geom_text(aes(label = group), size = 2.5, position = position_stack(vjust = 0.5)) +
coord_polar(theta = "y") +
scale_alpha_manual(values = c("0" = 0, "1" = 1, "2" = 0.7), guide = F) +
scale_x_discrete(breaks = NULL) +
scale_y_continuous(breaks = NULL) +
scale_fill_brewer(palette = "Dark2", na.translate = F) +
labs(x = NULL, y = NULL) +
theme_minimal()
